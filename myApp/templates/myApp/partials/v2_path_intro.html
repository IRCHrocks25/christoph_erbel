{% load static %}
<section id="journey" class="relative overflow-hidden bg-[#EAF4F3]">
  <!-- soft atmosphere -->
  <div class="pointer-events-none absolute inset-0">
    <div class="absolute inset-0 bg-gradient-to-b from-white/40 via-transparent to-white/30"></div>
    <div class="absolute -top-56 left-1/2 h-[760px] w-[760px] -translate-x-1/2 rounded-full bg-white/70 blur-3xl"></div>
    <div class="absolute -bottom-72 right-[-200px] h-[820px] w-[820px] rounded-full bg-[#2AAE8A]/10 blur-3xl"></div>
    <div class="absolute inset-0 opacity-[0.05] bg-[radial-gradient(circle_at_center,#0B1B2A_1px,transparent_1px)] bg-[length:30px_30px]"></div>
  </div>

  <div class="relative mx-auto max-w-6xl px-6 py-24 md:py-32">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-14 lg:gap-16 items-start">

      <!-- LEFT: Copy -->
      <div class="lg:col-span-6">
        <!-- Section Label -->
        <div class="mb-8">
          <p class="text-xs uppercase tracking-[0.3em] text-[#6B8E8E] font-light" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif; letter-spacing: 0.3em;">
            JOURNEY
          </p>
        </div>

        <!-- Large Serif Headline -->
        <h2 class="font-serif text-3xl md:text-4xl lg:text-5xl leading-[1.3] text-[#2D5F6B] mb-6" style="font-family: Georgia, 'Times New Roman', serif; font-weight: 400; letter-spacing: -0.02em;">
          For nearly 20 years, I've gone through deep personal healing
        </h2>

        <!-- First Body Paragraph - Closer to Headline -->
        <p class="text-lg md:text-xl leading-[1.85] text-[#3A3A3A] mb-8" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif; font-weight: 400;">
          and growth, working through inherited trauma, unconscious family patterns, emotional collapse, and inner conflict.
        </p>

        <!-- Subsequent Paragraphs -->
        <p class="text-lg md:text-xl leading-[1.85] text-[#3A3A3A] mb-10" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif; font-weight: 400;">
          Each experience was more than theory to me. It was something I applied in practice and lived through personally. Each one became a stone in the foundation of the path, carefully placed by life itself.
        </p>

        <p class="text-lg md:text-xl leading-[1.85] text-[#3A3A3A] mb-10" style="font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif; font-weight: 400;">
          Serving as a bridge from who I thought I had to be, to who I truly am. And my own life became that bridge for others too. What helped me to return back home will also work out for you.
        </p>

        <p class="text-lg sm:text-xl leading-relaxed sm:leading-[1.75] text-[#0B1B2A]/75 mb-8">
          Here's the journey that shaped my approach:
        </p>

        <!-- Credentials - Individual Box Containers -->
        <div class="mt-8 space-y-4">
          <!-- Box 1 -->
          <div class="rounded-2xl bg-white/75 backdrop-blur-xl px-6 py-5 shadow-lg ring-1 ring-[#0B1B2A]/8">
            <p class="text-base sm:text-lg leading-relaxed text-[#0B1B2A]/80" style="orphans: 2; widows: 2;">
              Over 15 years dedicated to personal transformation, rooted in healing inherited trauma and unconscious patterns
            </p>
          </div>

          <!-- Box 2 -->
          <div class="rounded-2xl bg-white/75 backdrop-blur-xl px-6 py-5 shadow-lg ring-1 ring-[#0B1B2A]/8">
            <p class="text-base sm:text-lg leading-relaxed text-[#0B1B2A]/80" style="orphans: 2; widows: 2;">
              13+ years of leading seminars, workshops, and transformational retreats across Europe, South America, and Southeast Asia
            </p>
          </div>

          <!-- Box 3 -->
          <div class="rounded-2xl bg-white/75 backdrop-blur-xl px-6 py-5 shadow-lg ring-1 ring-[#0B1B2A]/8">
            <p class="text-base sm:text-lg leading-relaxed text-[#0B1B2A]/80" style="orphans: 2; widows: 2;">
              11 years apprenticing with a Peruvian San Pedro master, initiated as Chaka Runa ("bridge person between worlds")
            </p>
          </div>

          <!-- Box 4 -->
          <div class="rounded-2xl bg-white/75 backdrop-blur-xl px-6 py-5 shadow-lg ring-1 ring-[#0B1B2A]/8">
            <p class="text-base sm:text-lg leading-relaxed text-[#0B1B2A]/80" style="orphans: 2; widows: 2;">
              Creator of The Selfhealing Path, a unique blend of spiritual wisdom, systemic healing, neuroscience, epigenetics, somatic experience, and psychology
            </p>
          </div>

          <!-- Box 5 -->
          <div class="rounded-2xl bg-white/75 backdrop-blur-xl px-6 py-5 shadow-lg ring-1 ring-[#0B1B2A]/8">
            <p class="text-base sm:text-lg leading-relaxed text-[#0B1B2A]/80" style="orphans: 2; widows: 2;">
              Certified in Coaching, NLP, Systemic Constellations, Hypnotherapy, Trauma Resolution, Somatic Integration, and Neuroscience
            </p>
          </div>
        </div>

        <p class="mt-10 text-lg sm:text-xl leading-relaxed sm:leading-[1.75] text-[#0B1B2A]/75" style="orphans: 2; widows: 2;">
          This isn't just a list of credentials. This isn't just about my&nbsp;knowledge. It's about embodied insight. I've seen what's&nbsp;possible. And I've created a path that works, because it's been&nbsp;lived.
        </p>
      </div>

      <!-- RIGHT: Editorial image composition -->
      <div class="lg:col-span-6">
        <div class="relative">

          <!-- Main "anchor" image (large, calm) -->
          <div class="relative overflow-hidden rounded-[28px] bg-white shadow-sm ring-1 ring-[#0B1B2A]/10">
            <img
              src="{% static 'myApp/images/Section Image (2).png' %}"
              alt=""
              class="h-[420px] w-full object-cover"
            />
            <!-- soft overlay to keep it on-brand -->
            <div class="absolute inset-0 bg-gradient-to-t from-white/35 via-transparent to-transparent"></div>
          </div>

          <!-- Small detail image (bottom-left) -->
          <div class="absolute -left-6 -bottom-10 hidden md:block w-[220px] overflow-hidden rounded-2xl bg-white shadow-sm ring-1 ring-[#0B1B2A]/10">
            <img
              src="https://images.unsplash.com/photo-1520697222865-7a9a4e0ef0ef?auto=format&fit=crop&w=1200&q=60"
              alt=""
              class="h-[160px] w-full object-cover"
            />
          </div>

          <!-- Map / texture card (top-right) -->
          <div class="absolute -right-6 top-8 hidden md:block w-[240px] rounded-2xl bg-white/75 backdrop-blur p-4 shadow-sm ring-1 ring-[#0B1B2A]/10">
            <div class="flex items-center justify-between">
              <div class="h-2 w-24 rounded-full bg-[#0B1B2A]/10"></div>
              <div class="h-2 w-10 rounded-full bg-[#1FA37F]/30"></div>
            </div>
            <div class="mt-4 overflow-hidden rounded-xl">
              <img
                src="https://images.unsplash.com/photo-1526778548025-fa2f459cd5c1?auto=format&fit=crop&w=1200&q=60"
                alt=""
                class="h-[130px] w-full object-cover opacity-90"
              />
            </div>
            <div class="mt-3 space-y-2">
              <div class="h-2 w-full rounded-full bg-[#0B1B2A]/10"></div>
              <div class="h-2 w-[80%] rounded-full bg-[#0B1B2A]/10"></div>
            </div>
          </div>

          <!-- Subtle “bridge line” accent -->
          <svg class="absolute -bottom-16 left-10 hidden md:block opacity-[0.18]" width="520" height="180" viewBox="0 0 520 180" fill="none">
            <path
              d="M10 120C90 40 150 160 230 110C320 55 350 40 510 70"
              stroke="#0B1B2A"
              stroke-width="2"
              stroke-linecap="round"
              stroke-dasharray="4 10"
            />
            <circle cx="10" cy="120" r="5" fill="#1FA37F"/>
            <circle cx="510" cy="70" r="5" fill="#1FA37F"/>
          </svg>

        </div>
      </div>

    </div>

    <!-- Photo Gallery Section -->
    <div class="relative mt-20 md:mt-24 lg:mt-32">
      <div class="relative">
        <!-- Previous Button - Left Edge (under left image edge) -->
        <button id="gallery-prev" class="absolute left-0 top-1/2 -translate-y-1/2 z-20 w-10 h-10 md:w-12 md:h-12 rounded-full bg-white/90 backdrop-blur-sm flex items-center justify-center shadow-md hover:bg-white transition-all duration-300 hover:scale-110 -translate-x-1/2">
          <svg class="w-5 h-5 md:w-6 md:h-6 text-[#2D5F6B]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
          </svg>
        </button>
        
        <!-- Next Button - Right Edge (under right image edge) -->
        <button id="gallery-next" class="absolute right-0 top-1/2 -translate-y-1/2 z-20 w-10 h-10 md:w-12 md:h-12 rounded-full bg-white/90 backdrop-blur-sm flex items-center justify-center shadow-md hover:bg-white transition-all duration-300 hover:scale-110 translate-x-1/2">
          <svg class="w-5 h-5 md:w-6 md:h-6 text-[#2D5F6B]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
        </button>
        
        <div id="gallery-container" class="flex gap-6 overflow-x-auto scroll-smooth scrollbar-hide pb-6" style="scroll-behavior: smooth; -webkit-overflow-scrolling: touch; min-width: 100%;">
          <!-- Gallery Images -->
          <div class="gallery-item flex-shrink-0 w-[280px] md:w-[320px] lg:w-[360px] group cursor-pointer">
            <div class="relative overflow-hidden rounded-lg bg-white shadow-sm ring-1 ring-[#0B1B2A]/5 transition-all duration-500 ease-out hover:scale-105 hover:shadow-xl hover:ring-[#0B1B2A]/10 h-[320px] md:h-[360px]">
              <img src="{% static 'myApp/images/Gallery Image.png' %}" alt="Journey image 1" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
            </div>
          </div>
          <div class="gallery-item flex-shrink-0 w-[280px] md:w-[320px] lg:w-[360px] group cursor-pointer">
            <div class="relative overflow-hidden rounded-lg bg-white shadow-sm ring-1 ring-[#0B1B2A]/5 transition-all duration-500 ease-out hover:scale-105 hover:shadow-xl hover:ring-[#0B1B2A]/10 h-[320px] md:h-[360px]">
              <img src="{% static 'myApp/images/Gallery Image (1).png' %}" alt="Journey image 2" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
            </div>
          </div>
          <div class="gallery-item flex-shrink-0 w-[280px] md:w-[320px] lg:w-[360px] group cursor-pointer">
            <div class="relative overflow-hidden rounded-lg bg-white shadow-sm ring-1 ring-[#0B1B2A]/5 transition-all duration-500 ease-out hover:scale-105 hover:shadow-xl hover:ring-[#0B1B2A]/10 h-[320px] md:h-[360px]">
              <img src="{% static 'myApp/images/Gallery Image (2).png' %}" alt="Journey image 3" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
            </div>
          </div>
          <div class="gallery-item flex-shrink-0 w-[280px] md:w-[320px] lg:w-[360px] group cursor-pointer">
            <div class="relative overflow-hidden rounded-lg bg-white shadow-sm ring-1 ring-[#0B1B2A]/5 transition-all duration-500 ease-out hover:scale-105 hover:shadow-xl hover:ring-[#0B1B2A]/10 h-[320px] md:h-[360px]">
              <img src="{% static 'myApp/images/Gallery Image (3).png' %}" alt="Journey image 4" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
            </div>
          </div>
          <div class="gallery-item flex-shrink-0 w-[280px] md:w-[320px] lg:w-[360px] group cursor-pointer">
            <div class="relative overflow-hidden rounded-lg bg-white shadow-sm ring-1 ring-[#0B1B2A]/5 transition-all duration-500 ease-out hover:scale-105 hover:shadow-xl hover:ring-[#0B1B2A]/10 h-[320px] md:h-[360px]">
              <img src="{% static 'myApp/images/Gallery Image (4).png' %}" alt="Journey image 5" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
            </div>
          </div>
          <div class="gallery-item flex-shrink-0 w-[280px] md:w-[320px] lg:w-[360px] group cursor-pointer">
            <div class="relative overflow-hidden rounded-lg bg-white shadow-sm ring-1 ring-[#0B1B2A]/5 transition-all duration-500 ease-out hover:scale-105 hover:shadow-xl hover:ring-[#0B1B2A]/10 h-[320px] md:h-[360px]">
              <img src="{% static 'myApp/images/Gallery Image (5).png' %}" alt="Journey image 6" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
            </div>
          </div>
          <div class="gallery-item flex-shrink-0 w-[280px] md:w-[320px] lg:w-[360px] group cursor-pointer">
            <div class="relative overflow-hidden rounded-lg bg-white shadow-sm ring-1 ring-[#0B1B2A]/5 transition-all duration-500 ease-out hover:scale-105 hover:shadow-xl hover:ring-[#0B1B2A]/10 h-[320px] md:h-[360px]">
              <img src="{% static 'myApp/images/Gallery Image (6).png' %}" alt="Journey image 7" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
            </div>
          </div>
          <div class="gallery-item flex-shrink-0 w-[280px] md:w-[320px] lg:w-[360px] group cursor-pointer">
            <div class="relative overflow-hidden rounded-lg bg-white shadow-sm ring-1 ring-[#0B1B2A]/5 transition-all duration-500 ease-out hover:scale-105 hover:shadow-xl hover:ring-[#0B1B2A]/10 h-[320px] md:h-[360px]">
              <img src="{% static 'myApp/images/Gallery Image (7).png' %}" alt="Journey image 8" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
            </div>
          </div>
          <div class="gallery-item flex-shrink-0 w-[280px] md:w-[320px] lg:w-[360px] group cursor-pointer">
            <div class="relative overflow-hidden rounded-lg bg-white shadow-sm ring-1 ring-[#0B1B2A]/5 transition-all duration-500 ease-out hover:scale-105 hover:shadow-xl hover:ring-[#0B1B2A]/10 h-[320px] md:h-[360px]">
              <img src="{% static 'myApp/images/Gallery Image (8).png' %}" alt="Journey image 9" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
            </div>
          </div>
          <div class="gallery-item flex-shrink-0 w-[280px] md:w-[320px] lg:w-[360px] group cursor-pointer">
            <div class="relative overflow-hidden rounded-lg bg-white shadow-sm ring-1 ring-[#0B1B2A]/5 transition-all duration-500 ease-out hover:scale-105 hover:shadow-xl hover:ring-[#0B1B2A]/10 h-[320px] md:h-[360px]">
              <img src="{% static 'myApp/images/Gallery Image (9).png' %}" alt="Journey image 10" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const galleryContainer = document.getElementById('gallery-container');
    const galleryItems = document.querySelectorAll('.gallery-item');
    const prevButton = document.getElementById('gallery-prev');
    const nextButton = document.getElementById('gallery-next');
    
    if (!galleryContainer || !galleryItems.length || !prevButton || !nextButton) {
      console.error('Gallery elements not found');
      return;
    }
    
    console.log('Gallery initialized with', galleryItems.length, 'images');
    
    let currentIndex = 0;
    let isScrolling = false;
    
    function scrollToIndex(index) {
      if (isScrolling) return;
      isScrolling = true;
      
      const targetItem = galleryItems[index];
      if (!targetItem) {
        isScrolling = false;
        return;
      }
      
      // Calculate scroll position to center the item
      const itemLeft = targetItem.offsetLeft;
      const itemWidth = targetItem.offsetWidth;
      const containerWidth = galleryContainer.offsetWidth;
      const scrollPosition = itemLeft - (containerWidth / 2) + (itemWidth / 2);
      
      galleryContainer.scrollTo({
        left: Math.max(0, scrollPosition),
        behavior: 'smooth'
      });
      
      currentIndex = index;
      
      // Reset scrolling flag after animation
      setTimeout(() => {
        isScrolling = false;
      }, 600);
    }
    
    function getCurrentIndex() {
      const scrollLeft = galleryContainer.scrollLeft;
      const containerWidth = galleryContainer.offsetWidth;
      const containerCenter = scrollLeft + (containerWidth / 2);
      
      let closestIndex = 0;
      let closestDistance = Infinity;
      
      galleryItems.forEach((item, index) => {
        const itemLeft = item.offsetLeft;
        const itemWidth = item.offsetWidth;
        const itemCenter = itemLeft + (itemWidth / 2);
        const distance = Math.abs(containerCenter - itemCenter);
        
        if (distance < closestDistance) {
          closestDistance = distance;
          closestIndex = index;
        }
      });
      
      return closestIndex;
    }
    
    function checkIfAtEnd() {
      const scrollLeft = galleryContainer.scrollLeft;
      const scrollWidth = galleryContainer.scrollWidth;
      const containerWidth = galleryContainer.offsetWidth;
      const maxScroll = scrollWidth - containerWidth;
      // Check if we're at or very close to the end (within 10px)
      return scrollLeft >= maxScroll - 10;
    }
    
    function checkIfAtStart() {
      const scrollLeft = galleryContainer.scrollLeft;
      // Check if we're at or very close to the start (within 10px)
      return scrollLeft <= 10;
    }
    
    // Next button - loops to first when at end
    nextButton.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      
      if (isScrolling) return;
      
      currentIndex = getCurrentIndex();
      
      // Check if we're at the end of the scroll
      if (checkIfAtEnd() || currentIndex === galleryItems.length - 1) {
        // At last image, loop to first
        scrollToIndex(0);
      } else {
        scrollToIndex(currentIndex + 1);
      }
    });
    
    // Previous button - loops to last when at first
    prevButton.addEventListener('click', function(e) {
      e.preventDefault();
      e.stopPropagation();
      
      if (isScrolling) return;
      
      currentIndex = getCurrentIndex();
      
      // Check if we're at the start of the scroll
      if (checkIfAtStart() || currentIndex === 0) {
        // At first image, loop to last
        scrollToIndex(galleryItems.length - 1);
      } else {
        scrollToIndex(currentIndex - 1);
      }
    });
    
    // Update index on scroll
    galleryContainer.addEventListener('scroll', function() {
      if (!isScrolling) {
        currentIndex = getCurrentIndex();
      }
    });
  });
</script>
